---
layout: post
title:  "Maven"
date:   2016-08-23
categories: useful
tags: Maven useful
excerpt: 
---
* content
{:toc}

Recently I try to build several projects with maven and find it amazingly useful!

```
mvn compile
```

compile the projects and you will find .class files in target/class directory


```
mvn package
```

Compile the code, run all tests, package the code into jar file.

```
mvn install
```

install the dependencies to local machine for quick access.

compile, test, and package your projectâ€™s code and then copy it into the local dependency repository

Here is an maven life cycle figure from [this blog](https://premaseem.wordpress.com/2012/04/25/maven-2-lifecycle-phases/)

![maven life cycle](/images/posts/maven2phases.gif)

## System jar

Sometimes jars are hard to get, thus we need to set it as system scope.

However, this kind of jars will not be packaged to fat jar.

Because the maven regard it similar to provided!

Here is the [official doc](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html) about system jar

> system. This scope is similar to provided except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository.

## Assemble system jar

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
 <properties>
        <maven.compiler.source>1.8</maven.compiler.source>
        <maven.compiler.target>1.8</maven.compiler.target>
        <encoding>UTF-8</encoding>
        <scala.version>2.10.5</scala.version>
  </properties>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>net.alchim31.maven</groupId>
                    <artifactId>scala-maven-plugin</artifactId>
                    <version>3.2.2</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.3</version>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>

            <plugin>
                <groupId>net.alchim31.maven</groupId>
                <artifactId>scala-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>scala-compile-first</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>add-source</goal>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>scala-test-compile</id>
                        <phase>process-test-resources</phase>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <!-- Plugin to create a single jar that includes all dependencies -->
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-install-plugin</artifactId>
                <version>2.4</version>
                <executions>
                    <execution>
                        <phase>initialize</phase>
                        <goals>
                            <goal>install-file</goal>
                        </goals>
                        <configuration>
                        <groupId>edu.stanford.nlp</groupId>
                        <artifactId>stanford-parser</artifactId>
                        <version>3.6.0</version>
                            <packaging>jar</packaging>
                            <file>${project.basedir}/lib/stanford-corenlp.jar</file>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>edu.stanford.nlp</groupId>
            <artifactId>stanford-parser</artifactId>
            <version>3.6.0</version>        
        </dependency>
        <dependency>
            <groupId>edu.stanford.nlp</groupId>
            <artifactId>stanford-model</artifactId>
            <version>3.6.0</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/stanford-english-corenlp-models-current.jar</systemPath>
        </dependency>
    </dependencies>
</project>  

```
